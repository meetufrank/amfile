<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>国际医疗健康顾问</title>
    <link rel="stylesheet" href="__PHONE__/case/mui/mui.min.css">
    <link rel="stylesheet" href="__PHONE__/case/css/base.css">
    <!--日期控件-->
    <link rel="stylesheet" href="__PHONE__/case/css/mobileSelect.css">
    <script src="__PHONE__/case/js/rem.js"></script>
    <link rel="stylesheet" href="__PHONE__/case/css/health.css">
    <link rel="stylesheet" href="__PHONE__/case/css/health_two.css">
    {if condition="$typeid eq 2"}
    <style>
        .content2{
            display: none;
        }
    </style>
    {/if}
</head>
<body>
    <!--title-->
    
    
    {if condition="$typeid eq 2"}
    <!--menu-->
    <div class="header">
        <div class="header_left">
            <span class="mui-icon mui-icon-back" onclick="javascript:history.go(-1)"></span>
        </div>
        <div class="header_center">
            <p>{$title}</p>
        </div>
        <div class="header_right">
            <p>&nbsp;</p>
        </div>
    </div>
    <div class="menu">
        <ul>
            <li class="active">问卷调查</li>
            <li>信息填写</li>
        </ul>
    </div>

    <!--part1-->
    <div class="content1">
        <!--content-->
        <div class="content">
            <!--单独的-->
            <div class="content_only">
                <p class="question_name">1.您需要下述哪种心理支持？</p>
                <div class="question_option">
                    <p><input type="radio" name="1" id="a"><label for="a">个人支持（自己）</label></p>
                    <p><input type="radio" name="1" id="b"><label for="b">伴侣支持（自己和伴侣）</label></p>
                    <p><input type="radio" name="1" id="c"><label for="c">个人支持（职业发展）</label></p>
                </div>
            </div>
            <!--多选块-->
            <div class="content_only">
                <p class="question_name">2.您是否有情绪问题（心情困扰）？</p>
                <div class="question_option">
                    <ul>
                        <li><input type="checkbox" name="box" value="悲伤"><label for="">悲伤</label></li>
                        <li><input type="checkbox" name="box" value="抑郁"><label for="">抑郁</label></li>
                        <li><input type="checkbox" name="box" value="焦虑"><label for="">焦虑</label></li>
                        <li><input type="checkbox" name="box" value="愤怒"><label for="">愤怒</label></li>
                        <li><input type="checkbox" name="box" value="困惑"><label for="">困惑</label></li>
                        <li><input type="checkbox" name="box" value="压力"><label for="">压力</label></li>
                        <li><input type="checkbox" name="box" value="其他" class="other"><label for="">其他</label><input type="text" class="other_input" readonly="readonly"> <span>请描述</span></li>
                    </ul>
                    <div style="clear: both;"></div>
                </div>
            </div>

            <!--单独的-->
            <div class="content_only">
                <p class="question_name">3.您是否有伤害自己的想法？</p>
                <div class="question_option">
                    <p><input type="radio" name="2" id="nothing"><label for="nothing">从没有</label></p>
                    <p><input type="radio" name="2" id="some"><label for="some">有时</label></p>
                    <p><input type="radio" name="2" id="recent"><label for="recent">最近</label></p>
                </div>
            </div>
            <!--单独的-->
            <div class="content_only">
                <p class="question_name">4.您是否有长期的身体疼痛或者其他症状？</p>
                <div class="question_option">
                    <p><input type="radio" name="3" id="yes" value="是"><label for="yes">是</label><input type="text"class="describe" readonly="readonly" > <span>请描述</span> </p>
                    <p><input type="radio" name="3" id="no" value="否"><label for="no">否</label></p>
                </div>
            </div>
            <!--单独的-->
            <div class="content_only">
                <p class="question_name">5.您是否有在吃药？</p>
                <div class="question_option">
                    <p><input type="radio" name="4" id="yes1"><label for="yes1">是</label><input type="text" class="describe" readonly="readonly"> <span>请描述</span> </p>
                    <p><input type="radio" name="4" id="no1"><label for="no1">否</label></p>
                </div>
            </div>
            <!--单独的-->
            <div class="content_only">
                <p class="question_name">6.您是之前做过心理咨询？</p>
                <div class="question_option">
                    <p><input type="radio" name="5" id="shi"><label for="shi">是</label><input type="text" class="describe" readonly="readonly"> <span>请描述</span> </p>
                    <p><input type="radio" name="5" id="fou"><label for="fou">否</label></p>
                </div>
            </div>
        </div>
        <!--下一步    -->
        <div class="next_btn">
            <a href="javascript:void(0);">下一步</a>
        </div>
    </div>
   {else} 
    <div class="header">
        <div class="header_left" style="width: 18%;">
            <span class="mui-icon mui-icon-back" onclick="javascript:history.go(-1)"></span>
        </div>
        <div class="header_center">
            <p>{$title}</p>
        </div>
        <div class="header_right" style="width: 18%;">
            <p>&nbsp;</p>
        </div>
    </div>
    <!--menu-->
    <div class="menu">
        <ul>
            <!--<li>问卷调查</li>-->
            <li class="active" style="width: 100%;">信息填写</li>
        </ul>
    </div>
    {if condition="$typeid eq 4"}
    <div class="tap">
        <div class="bgColor"><!-- 背景遮罩 --></div>
        <img src="__PHONE__/case/images/emo.jpg" alt="">
    </div>
    {/if}
   {/if}
    <!--part2-->

    <div class="content2">

        <div class="contentT">
            {if condition="$typeid eq 4"}
            <div class="content_title">病案号</div>
            <div class="tc">
                <input type="text" placeholder="医学专家意见服务病案号(见专家意见报告首页)" class="emo">
                <div style="text-align: right;" class="findRight">
                    <a href="javascript:void(0);" class="howFind">如何找到病案号？</a>
                </div>

            </div>
            {/if}
            <!--title-->
            <div class="content_title">申请人信息</div>
            <!--表单部分-->
            <div class="tc">
                <input type="text" placeholder="姓名" class="name">
                <div class="pr">
                    <input type="text" readonly="readonly" id="trigger1" class="birth" placeholder="出生日期">
                    <img src="__PHONE__/case/images/birth.png" alt="" class="bir">
                </div>

                <!--患者性别-->
                <div class="df">
                    <p>患者性别</p>
                    <div>
                        <input type="radio" name="11" id="yess"><label for="yess">男</label>
                        <input type="radio" name="11" id="noo"><label for="noo">女</label>
                    </div>
                </div>
                <input type="text" placeholder="电话" class="phone">
                <input type="text" placeholder="E-mail" class="mail">
                <div class="pr df">
                    <!--<input type="text" placeholder="所在省市区" readonly="readonly" id="expressArea">-->

                    <div class="choose_add">
                        <!--省-->
                        <select id="province" name="province">
                            <option value="省">省</option>
                        </select>
                    </div>

                    <div class="choose_add">
                        <!--市-->
                        <select id="city" name="city">
                            <option value="市">市</option>
                        </select>
                    </div>

                    <div class="choose_add">
                        <!--区-->
                        <select id="district" name="district">
                            <option value="区">区</option>
                        </select>
                    </div>

                    <!--<select name="" id="">-->
                    <!--<option value=""></option>-->
                    <!--</select>-->
                    <!--<img src="images/down.png" alt="" class="down">-->
                </div>
                <div class="pr">
                    <!--<input type="text" placeholder="请选择服务语言" readonly="readonly">-->
                    <select name="" id="sele">
                        <option>请选择服务语言</option>
                        <option value="广东话">广东话</option>
                        <option value="普通话">普通话</option>
                        <option value="粤语">粤语</option>
                        <option value="英语">英语</option>
                        <option value="俄语">俄语</option>
                    </select>
                    <img src="__PHONE__/case/images/down.png" alt="" class="down" style="pointer-events: none;">

                </div>

                <!--偏好联络方式-->
                <div class="df mb">
                    <p>偏好的联络方式</p>
                    <div>
                        <input type="radio" name="22" id="phone"><label for="phone">电话</label>
                        <input type="radio" name="22" id="mail"><label for="mail">邮箱</label>
                    </div>
                </div>
                <div class="content_title">请说明您（或患者）的病情和需求</div>
                <!--testarea-->
                <div class="test mb">
                    <textarea class="info"></textarea>
                </div>
                <div class="content_title">方便联络的时间</div>
                <div class="select_time">
                    <ul>
                        <li class="active">9:00-12:00</li>
                        <li>12:00-15:00</li>
                        <li>15:00-18:00</li>
                        <li>18:00-21:00</li>
                        <div style="clear: both;"></div>
                    </ul>
                    <input type="text" placeholder="请输入指定的时间">
                </div>
                <!--上传文件-->
                <div style="width: 5.56rem; margin: 0 auto; text-align: left;">
                    <input type="file" class="file_no" id="fileField">
                    <span class="file_cli">选择文件</span> <span class="file_name">文本文本文本</span>
                </div>
            </div>
        </div>
        <!--免责声明-->
        <div class="terms">
            <input type="checkbox" name="33"><label for="">我同意下述&nbsp;<a href="two_service.html">免责声明和服务条款</a></label>
        </div>
        <!--提交按钮-->
        <div class="sub_btn">
            <a href="">提交</a>
        </div>

    </div>


    <script src="__PHONE__/case/js/jquery.min.js"></script>
    <script src="__PHONE__/case/layui/layui.all.js"></script>
    <!--日期控件-->
    <script src="__PHONE__/case/js/mobileSelect.js"></script>
    <!--日期控件-->
    <script>
        // 日期选择
        var years=[];
        var month=[];
        var day=[];
        var myDate = new Date();
        myDate.getFullYear();    //获取完整的年份(4位,1970-????)
        myDate.getMonth();       //获取当前月份(0-11,0代表1月)
        myDate.getDate();
        var _data=[];
        for(i=0; i<myDate.getFullYear()-1960; i++){
            //年
            var obj={};
            var yer=1960+i+1;
            obj.value=1960+i+1;
            var _data2=[];
            for(n=0; n<12; n++){
                //月
                var obj2={};
                if(n<9){
                    obj2.value='0'+(n+1);
                }else{
                    obj2.value=n+1;
                }
                var _data3=[];
                if(n==1){
                    var cond1 = yer % 4 == 0;  //条件1：年份必须要能被4整除
                    var cond2 = yer % 100 != 0;  //条件2：年份不能是整百数
                    var cond3 = yer % 400 ==0;
                    var cond = cond1 && cond2 || cond3;
                    //闰年
                    if(cond){
                        for(y=0; y<29; y++){
                            //日
                            var obj3={};
                            if(y<9){
                                obj3.value='0'+(y+1);
                            }else{
                                obj3.value=y+1;
                            }
                            _data3.push(obj3)
                        }
                    }else{
                        for(y=0; y<28; y++){
                            //日
                            var obj3={};
                            if(y<9){
                                obj3.value='0'+(y+1);
                            }else{
                                obj3.value=y+1;
                            }
                            _data3.push(obj3)
                        }
                    }
                }else if(n==0||n==2||n==4||n==6||n==7||n==9||n==11){
                    for(y=0; y<31; y++){
                        //日
                        var obj3={};
                        if(y<9){
                            obj3.value='0'+(y+1);
                        }else{
                            obj3.value=y+1;
                        }
                        _data3.push(obj3)
                    }
                }else{
                    for(y=0; y<30; y++){
                        //日
                        var obj3={};
                        if(y<9){
                            obj3.value='0'+(y+1);
                        }else{
                            obj3.value=y+1;
                        }
                        _data3.push(obj3)
                    }
                }
                obj2.childs=_data3;
                _data2.push(obj2);
            }
            obj.childs=_data2;
            _data.push(obj)
        }
        var mobileSelect1 = new MobileSelect({
            trigger: '#trigger1',
            title: '日期选择',
            wheels: [
                {data:_data}
            ],
            transitionEnd:function(indexArr, data){
                console.log(data);
            },
            callback:function(indexArr, data){
                console.log(data);
                // $("#trigger1").val(data[0].value+'-'+data[1].value+'-'+data[2].value);

                $("#trigger1").val(data[2].value+' / '+data[1].value+' / '+data[0].value);
            }
        });
    </script>
    <script>
        $(".file_cli").click(function(){
            $(".file_no").click();
//            var lj = document.getElementById('fileField').files[0].name;
//            $(".file_name").html(lj);
        });

        $(function(){   //  part1
            // 复选框部分
            $(".other").click(function(){
                var $this = $(this);
                if($this.is(":checked")){
                    $(this).siblings(".other_input").removeAttr("readonly");
                    $(this).siblings(".other_input").css("background","transparent");
                    $(this).siblings("span").hide();
                }else{
                    $(".other_input").attr("readonly","readonly");
                    $(".other_input").css("background","#f2f3f6");
                    $(this).siblings("span").show();
                }

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });

            // 单选框部分
            $("#yes").click(function(){
                var $this = $(this);
                $this.siblings(".describe").removeAttr("readonly");
                $this.siblings(".describe").css("background","transparent");
                $this.siblings("span").hide();

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });
            $("#no").click(function(){
                var $this = $(this);
                $this.parent().siblings().find(".describe").attr("readonly","readonly");
                $this.parent().siblings().find(".describe").css("background","#f2f3f6");
                $this.parent().siblings().find("span").hide();

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });

            $("#yes1").click(function(){
                var $this = $(this);
                $this.siblings(".describe").removeAttr("readonly");
                $this.siblings(".describe").css("background","transparent");
                $this.siblings("span").hide();

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });
            $("#no1").click(function(){
                var $this = $(this);
                $this.parent().siblings().find(".describe").attr("readonly","readonly");
                $this.parent().siblings().find(".describe").css("background","#f2f3f6");
                $this.parent().siblings().find("span").hide();

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });

            $("#shi").click(function(){
                var $this = $(this);
                $this.siblings(".describe").removeAttr("readonly");
                $this.siblings(".describe").css("background","transparent");
                $this.siblings("span").hide();

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });
            $("#fou").click(function(){
                var $this = $(this);
                $this.parent().siblings().find(".describe").attr("readonly","readonly");
                $this.parent().siblings().find(".describe").css("background","#f2f3f6");
                $this.parent().siblings().find("span").hide();

                var radio1= $('input:radio[name="1"]:checked').val();
                var radio2= $('input:radio[name="2"]:checked').val();
                var radio3= $('input:radio[name="3"]:checked').val();
                var radio4= $('input:radio[name="4"]:checked').val();
                var radio5= $('input:radio[name="5"]:checked').val();
                var check = $('input:checkbox[name="box"]:checked').val();
                if(radio1!=null && radio2!=null && radio3!=null && radio4!=null && radio5!=null && check!=null){
                    $(".next_btn a").css("background","#008fff");
                }
            });



            $(".next_btn").on('click','a',function(){
                    // 获取 name=3 的input 并获取他的value值   (点击下一步时的验证)
                    var radio1= $('input:radio[name="1"]:checked').val();
                    var radio2= $('input:radio[name="2"]:checked').val();
                    var radio3= $('input:radio[name="3"]:checked').val();
                    var radio4= $('input:radio[name="4"]:checked').val();
                    var radio5= $('input:radio[name="5"]:checked').val();

                    var check = $('input:checkbox[name="box"]:checked').val();
                    // alert(check);

                    if(radio1==null || radio2==null || radio3==null || radio4==null || radio5==null || check==null){
                        layer.msg("请填写完整内容");
                        $(".next_btn a").css("background","#c6c6d3");
                        return false;
                    }else{

                        $(".next_btn a").css("background","#008fff");

                        $(".content1").hide();
                        $(".content2").show();

                        $(".menu li:last-child").addClass("active").siblings().removeClass("active");

                    }
            });
        });

        $(".mui-icon-back").click(function(){
            $(".content1").show();
            $(".content2").hide();
            $(".menu li:last-child").removeClass("active").siblings().addClass("active");
        });

        $(function(){   //  part2
            $(".select_time").on('click','li',function(){
                var $this = $(this);
                if(!$this.hasClass("active")){
                    $this.addClass("active");
                }else{
                    $this.removeClass("active");
                }
            });
            $(".down").click(function () {
                $("#sele").prev().click();
            });

            // 点击提交
            $(".sub_btn a").click(function(){
                var $name = $(".name").val();
                var $birth = $(".birth").val();
                var val=$('input:radio[name="11"]:checked').val();
                var $phone = $(".phone").val();
                var $mail = $(".mail").val();
                var regEm = /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;
                var $expressArea = $("#expressArea").val();
                var val1=$('input:radio[name="22"]:checked').val();
                var $info = $(".info").val();
                var val3=$('input:checkbox[name="33"]:checked').val();

                if($name == ""){
                    layer.msg("姓名不能为空");
                    return false;
                }else if($birth == ""){
                    layer.msg("请选择出生日期");
                    return false;
                }else if(val==null){
                    layer.msg("请选择你的性别");
                    return false;
                }else if($phone == ""){
                    layer.msg("电话号不能为空");
                    return false;
                }else  if(!(/^1[3456789]\d{9}$/.test($phone))){
                    layer.msg("请输入正确的手机号");
                    return false;
                }else if($mail == ""){
                    layer.msg("邮箱不能为空");
                    return false;
                }else if(!regEm.test($mail)){
                    layer.msg("请输入正确的邮箱");
                    return false;
                }else if($expressArea == ""){
                    layer.msg("省市区不能为空");
                    return false;
                }else  if(val1==null){
                    layer.msg("请选择偏好的联络方式");
                    return false;
                }else if($info == ""){
                    layer.msg("病情需求不能为空");
                    return false;
                }else if(val3==null){
                    layer.msg("请阅读并勾选免责声明");
                    return false;
                }
            });
        });


$(".howFind").click(function(){
           $(".tap").show(200);
           $("body").css("overflow","hidden");
        });
        $(".bgColor").click(function(){
           $(".tap").fadeOut();
            $("body").css("overflow","auto");
        });


    </script>
</body>
</html>