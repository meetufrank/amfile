<script src="http://res.wx.qq.com/open/js/jweixin-1.4.0.js "></script>
<script>
    wx.config({
        debug: false,
        appId: '{$signPackage.appId}',
        timestamp: '{$signPackage.timestamp}',
        nonceStr: '{$signPackage.nonceStr}',
        signature: '{$signPackage.signature}',
        jsApiList: [
            // 所有要调用的 API 都要加到这个列表中
            'checkJsApi',
            'openLocation',
            'getLocation',
            'updateAppMessageShareData',
            'updateTimelineShareData'
          ]
    });
   wx.ready(function () {   //需在用户可能点击分享按钮前就先调用
  wx.updateAppMessageShareData({ 
    title: '{$site_title}',
    desc: '{$desc}',
    link: '{$drumpurl}',
    imgUrl: '{$imgurl}',
    success: function () {
       
      // 设置成功
    }
  });
  wx.updateTimelineShareData({ 
    title: '{$site_title}',
    link: '{$drumpurl}',
    imgUrl: '{$imgurl}',
    success: function () {
      // 设置成功
    }
  })
});  
//    wx.ready(function () {
//        
//        wx.onMenuShareAppMessage({
//          title: '{$site_title}',
//          desc: '{$desc}',
//          link: '{$drumpurl}',
//          imgUrl: '{$imgurl}',
//          trigger: function (res) {
//            // 不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回
//             //alert('用户点击发送给朋友');
//          },
//          success: function (res) {
//             //alert('已分享');
//          },
//          cancel: function (res) {
//             //alert('已取消');
//          },
//          fail: function (res) {
//            //alert(JSON.stringify(res));
//          }
//        });
//
//        wx.onMenuShareTimeline({
//          title: '{$site_title}',
//          link: '{$drumpurl}',
//          imgUrl: '{$imgurl}',
//          trigger: function (res) {
//            // 不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回
//            // alert('用户点击分享到朋友圈');
//          },
//          success: function (res) {
//           //alert('已分享');
//          },
//          cancel: function (res) {
//            // alert('已取消');
//          },
//          fail: function (res) {
//            // alert(JSON.stringify(res));
//          }
//        });
//        wx.onMenuShareQZone({
//    title: '{$site_title}',
//          desc: '{$desc}',
//          link: '{$drumpurl}',
//          imgUrl: '{$imgurl}',
//    success: function () { 
//       // 用户确认分享后执行的回调函数
//    },
//    cancel: function () { 
//        // 用户取消分享后执行的回调函数
//    }
//});
//wx.onMenuShareQQ({
//    title: '{$site_title}',
//          desc: '{$desc}',
//          link: '{$drumpurl}',
//          imgUrl: '{$imgurl}',
//    success: function () { 
//       // 用户确认分享后执行的回调函数
//    },
//    cancel: function () { 
//       // 用户取消分享后执行的回调函数
//    }
//});
//
//
//});
</script>